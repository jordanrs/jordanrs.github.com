<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Jordan Rogers-Smith]]></title>
  <link href="http://jordanrs.github.io/atom.xml" rel="self"/>
  <link href="http://jordanrs.github.io/"/>
  <updated>2013-07-23T09:58:01+01:00</updated>
  <id>http://jordanrs.github.io/</id>
  <author>
    <name><![CDATA[Jordan Rogers-Smith]]></name>
    <email><![CDATA[jordanrs2k1@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Royal Baby Catifier]]></title>
    <link href="http://jordanrs.github.io/blog/2013/07/23/royal-baby-catifier/"/>
    <updated>2013-07-23T09:54:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/07/23/royal-baby-catifier</id>
    <content type="html"><![CDATA[<p>A quick, fun evening hacking up a Chrome extension. Sick of seeing articles about the royal baby? This extension removes the container and replaces it with a cat.</p>

<p><a href="https://chrome.google.com/webstore/detail/royal-baby-catifier/adjameoabcmbdobiafhhoclndepibfno">Chrome Web Store</a></p>

<p><img src="https://lh3.googleusercontent.com/0BF16NBbShToYIB8sSp49sKdFZR6wlWAQl8H7KN5_kEftx_3yvhJNCyPMOSF0RaBecRzTWrE3Q=s640-h400-e365-rw" alt="Cats" /></p>

<p><a href="https://github.com/jordanrs/royal-baby-catifier">Source</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacked 2013]]></title>
    <link href="http://jordanrs.github.io/blog/2013/07/22/hacked-2013/"/>
    <updated>2013-07-22T12:03:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/07/22/hacked-2013</id>
    <content type="html"><![CDATA[<p><a href="http://hacked.io">Hacked.oi</a> was utterly awesome. In the end myself, <a href="https://twitter.com/marcelloseri">Marcello Seri</a> and <a href="https://twitter.com/b3noxley">Ben Oxley</a> created <a href="https://www.hackerleague.org/hackathons/hacked/hacks/homeflux">homeFlux</a>, a realtime system for adapting light levels to match a desired intensity and also adjust colour values over time much like <a href="http://justgetflux.com/">flu.x</a>. Was awesome fun.</p>

<iframe width="560" height="315" src="http://jordanrs.github.io//www.youtube.com/embed/T_gPdTJkoM0" frameborder="0" allowfullscreen></iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ActiveAdmin Form Preview with Javascript FormData]]></title>
    <link href="http://jordanrs.github.io/blog/2013/07/10/activeadmin-form-preview-with-javascript-formdata/"/>
    <updated>2013-07-10T20:46:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/07/10/activeadmin-form-preview-with-javascript-formdata</id>
    <content type="html"><![CDATA[<p>One of my recent tasks has been to build a preview of a form submission into an existing application. Having done something similar in the past involving changing the forms action with javascript, ajax posting the form (including images), generating a preview, changing the form back blaa blaa blaa blaa blaaaaa. I wanted to find a cleaner way to a) deal with the preview and b) ajaxing blob data (image/files) and thanks to not having to support IE implemented the following procedure using FormData and XMLHttpRequest 2.</p>

<!-- more -->


<p>FormData is awesome, give it a form including blob data and it&rsquo;ll return an object that can be attached to $.ajax or standard XMLHttpRequest.send and all the caveats and nuiances of ajax forms disappear in the blink of an eye.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// something like</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">fd</span> <span class="o">=</span> <span class="nx">FormData</span><span class="p">.</span><span class="k">new</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'>  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/iwantdata&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">data</span><span class="o">:</span> <span class="nx">fd</span><span class="p">,</span>
</span><span class='line'>  <span class="p">...</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// or</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">ajax</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span class='line'><span class="nx">ajax</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;/iwantdata&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ajax</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">fd</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>My stratergy then was simple, take more fieldset, clone it, wrap it in a formtag (all in memory), create the formdata object and away we go images and all. So my first attempt looked as follows.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">buildFormData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$fieldset</span><span class="p">){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">$clone</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#fieldset&#39;</span><span class="p">).</span><span class="nx">clone</span><span class="p">({</span> <span class="nx">deepWithDataAndEvents</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">$form</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="err">&#39;</span><span class="o">&lt;</span><span class="nx">form</span> <span class="o">/&gt;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$clone</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">fd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">(</span><span class="nx">$form</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">fd</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">sendPreview</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">formData</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>   <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/iwantdata&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">data</span><span class="o">:</span> <span class="nx">formData</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">processData</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">contentType</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>  <span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="nx">weDidIt</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>This worked great at first all the data was being submitted correctly excpet file fields. These werent being copied over at all due to the caveats of browser security and cloning file fields it seems. So instead of doing it all in memory, which would have been the ideal, I had to use the file fields in the DOM but didnt want to have to pull the form apart and put it back together. Even though the html specification has a big NO NO when it comes to nested form tags it is possible to create them with javascript and this is what i did to build my in place subsection FormData.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">buildFormData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$fieldset</span><span class="p">){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">$form</span> <span class="o">=</span> <span class="nx">$fieldset</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="s1">&#39;&lt;form /&gt;&#39;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">fd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">(</span><span class="nx">$form</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>  <span class="nx">$fieldset</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">();</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">fd</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">sendPreview</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">formData</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>   <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/iwantdata&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">data</span><span class="o">:</span> <span class="nx">formData</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">processData</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">contentType</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>  <span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="nx">weDidIt</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Not ideal but this solution was a simple way to create a FormData from a subset of fields on the fly which includes all the file field information also.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Testing Facebook login and permissions with Capybara]]></title>
    <link href="http://jordanrs.github.io/blog/2013/06/01/testing-facebook-login-and-permissions-with-capybara/"/>
    <updated>2013-06-01T10:27:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/06/01/testing-facebook-login-and-permissions-with-capybara</id>
    <content type="html"><![CDATA[<p>Having begun to use Capybara and Rspec quiet heavily there have been a few challenges that need to be overcome. One of these is that the applications I develop day to day are heavily intertwined with Facebook and user flow relies heavily on Facebook login and accepting permissions at various points throughout the application.</p>

<!-- more -->


<p>Outside of the Facebook chrome (the non iframed version of the application) its quite easy interact with these events as if we were a normal user.</p>

<p><strong>Use Facebook Test Users</strong></p>

<p>First go to your Facebook applications roles dashboard at <a href="https://developers.facebook.com/apps/">https://developers.facebook.com/apps/</a>[APPID]/roles and create some test users and if needed make them friends with one another. Take a note of there email, fbid and create a password for them.</p>

<p><strong>Capybara Settings</strong></p>

<p>Since Facebook is an external service we need to extend Capybaras default wait time incase its being slow and also change the host that the specs run under so that it matches the settings for our Facebook app.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Capybara</span><span class="o">.</span><span class="n">default</span><span class="p">\</span><span class="n">_wait</span><span class="p">\</span><span class="n">_time</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'><span class="no">Capybara</span><span class="o">.</span><span class="n">app_host</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span> <span class="o">+</span> <span class="no">Settings</span><span class="o">.</span><span class="n">host</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Test User Factory</strong></p>

<p>The FactoryGirl gem provides a great way to create and manage test data based on rails models. FactoryGirl can even be used with things other than models so to keep my actual user model separate from my test users data I created a special TestUser class. By placing it in a subfolder of the support folder the default installation will load all files and sub folders at initialisations allowing us access to this special class in our tests.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># spec/support/models/test_user.rb</span>
</span><span class='line'><span class="k">class</span> <span class="nc">TestUser</span>
</span><span class='line'>   <span class="kp">attr_accessor</span>  <span class="ss">:email</span><span class="p">,</span> <span class="ss">:password</span><span class="p">,</span> <span class="ss">:fbid</span><span class="p">,</span> <span class="ss">:name</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>  <br/>
With this class its then easily to make a test_user factory as you would a rails model factory. In this instance iv used a nested factory for additional test users with different states.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="no">FactoryGirl</span><span class="o">.</span><span class="n">define</span> <span class="k">do</span>
</span><span class='line'>   <span class="n">factory</span> <span class="ss">:test_user</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>     <span class="nb">name</span> <span class="s1">&#39;Bob Ameibdcaahgd Liangman&#39;</span>
</span><span class='line'>     <span class="n">fbid</span> <span class="s1">&#39;100005892102238&#39;</span>
</span><span class='line'>     <span class="n">email</span> <span class="s1">&#39;oyncoeh_liangman_1368123301@tfbnw.net&#39;</span>
</span><span class='line'>     <span class="n">password</span> <span class="s1">&#39;XXXX&#39;</span>
</span><span class='line'>
</span><span class='line'>     <span class="n">factory</span> <span class="ss">:test_user_mark</span> <span class="k">do</span>
</span><span class='line'>       <span class="nb">name</span> <span class="s1">&#39;Mark Ameiehbaakf Wisemanstein&#39;</span>
</span><span class='line'>       <span class="n">fbid</span> <span class="s1">&#39;100005958231006&#39;</span>
</span><span class='line'>       <span class="n">email</span> <span class="s1">&#39;dqfaoxm_wisemanstein_13684123@tfbnw.net&#39;</span>
</span><span class='line'>       <span class="n">password</span> <span class="s1">&#39;XXXX&#39;</span>
</span><span class='line'>     <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>     <span class="n">factory</span> <span class="ss">:test_user_arabic</span> <span class="k">do</span>
</span><span class='line'>       <span class="nb">name</span> <span class="s1">&#39;Richard Amehgghdihei Changescu&#39;</span>
</span><span class='line'>       <span class="n">fbid</span> <span class="s1">&#39;100005877823859&#39;</span>
</span><span class='line'>       <span class="n">email</span> <span class="s1">&#39;lifczou_changescu_1368123920@tfbnw.net&#39;</span>
</span><span class='line'>       <span class="n">password</span> <span class="s1">&#39;XXXX&#39;</span>
</span><span class='line'>     <span class="k">end</span>
</span><span class='line'>   <span class="k">end</span>
</span><span class='line'> <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using these tests users in a capybara spec only has one caveat. They must be created in memory using build since there isn&rsquo;t a database table for them to be saved to</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">let</span><span class="p">(</span><span class="ss">:test_user_mark</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>  <span class="no">FactoryGirl</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="ss">:test_user_mark</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Automating Facebook</strong></p>

<p>The following module is a collection of macros that take care of the Facebook login and permissions dialogues. It attempts to deal with the various possible flows that can happen when using login with Facebook depending on wether the user has logging in and is being asked for permissions in the same sequence or if the permission are taken at a different point. There is also some javascript macros for login the user out of Facebook and removing the app permissions</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># spec/support/facebook_macros</span>
</span><span class='line'><span class="k">module</span> <span class="nn">FacebookMacros</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">complete_facebook_dialogues_on_click</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">test_user</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># until bookface version bumped to latest we have no way to know its ready so delay, not ideal</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">find</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">window_handles</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">within_window</span><span class="p">(</span><span class="s1">&#39;Facebook&#39;</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">fill_in_facebook_form</span><span class="p">(</span><span class="n">test_user</span><span class="p">)</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">has_css?</span><span class="p">(</span><span class="s1">&#39;#loginbutton&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">accept_permissions_outside_facebook</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">fill_in_facebook_form</span><span class="p">(</span><span class="n">test_user</span><span class="p">)</span>
</span><span class='line'>    <span class="n">fill_in</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">test_user</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">fill_in</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">test_user</span><span class="o">.</span><span class="n">password</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">find</span><span class="p">(</span><span class="s1">&#39;#loginbutton&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">accept_additional_permissions</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">window_handles</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">within_window</span><span class="p">(</span><span class="s1">&#39;Facebook&#39;</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">accept_permissions_outside_facebook</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">accept_permissions_outside_facebook</span>
</span><span class='line'>    <span class="n">find</span><span class="p">(</span><span class="ss">:xpath</span><span class="p">,</span> <span class="s2">&quot;//button[@name=&#39;__CONFIRM__&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">window_handles</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
</span><span class='line'>    <span class="n">find</span><span class="p">(</span><span class="ss">:xpath</span><span class="p">,</span> <span class="s2">&quot;//button[@name=&#39;__CONFIRM__&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">window_handles</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">deauth_app</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">page</span><span class="o">.</span><span class="n">execute_script</span> <span class="sx">%Q{</span>
</span><span class='line'><span class="sx">       FB.api(&quot;/me/permissions&quot;,&quot;DELETE&quot;, function(response){</span>
</span><span class='line'><span class="sx">         console.log(response)</span>
</span><span class='line'><span class="sx">       });</span>
</span><span class='line'><span class="sx">     }</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">logout</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">page</span><span class="o">.</span><span class="n">execute_script</span> <span class="sx">%Q{</span>
</span><span class='line'><span class="sx">      FB.logout(function(response) {</span>
</span><span class='line'><span class="sx">        // user is now logged out</span>
</span><span class='line'><span class="sx">      });</span>
</span><span class='line'><span class="sx">     }</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above module can be easily included in Rspec&rsquo;s configure block with the config.includes command</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">RSpec</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">include</span> <span class="no">FacebookMacros</span>
</span><span class='line'>  <span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>An example scenario using these macros. Its important that they are run with javascript enabled.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">scenario</span> <span class="s1">&#39;user import friends&#39;</span><span class="p">,</span> <span class="ss">:js</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">visit</span> <span class="n">root_path</span>
</span><span class='line'>  <span class="n">complete_facebook_dialogues_on_click</span><span class="p">(</span><span class="s1">&#39;#auth_me&#39;</span><span class="p">,</span> <span class="n">test_user</span><span class="p">)</span>
</span><span class='line'>  <span class="n">page</span><span class="o">.</span><span class="n">should</span> <span class="n">have_css</span><span class="p">(</span><span class="s1">&#39;#entry_step_1&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">visit</span> <span class="n">home_dashboard_path</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">expect</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">2</span>
</span><span class='line'>    <span class="n">find</span><span class="p">(</span><span class="s1">&#39;#add_events&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">accept_additional_permissions</span>
</span><span class='line'>    <span class="nb">sleep</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">page</span><span class="o">.</span><span class="n">should_not</span> <span class="n">have_css</span><span class="p">(</span><span class="s1">&#39;#add_events&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">page</span><span class="o">.</span><span class="n">should</span> <span class="n">have_css</span><span class="p">(</span><span class="s1">&#39;.events_item&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># deal with additional perms</span>
</span><span class='line'>  <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">change</span><span class="p">(</span><span class="no">Event</span><span class="p">,</span> <span class="ss">:count</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">logout</span>
</span><span class='line'>  <span class="no">Capybara</span><span class="o">.</span><span class="n">reset_session!</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning Chef From Scratch - Building a EC2 backed Rails Stack Part 1]]></title>
    <link href="http://jordanrs.github.io/blog/2013/05/26/Learning-Chef-From-Scratch---Building-a-EC2-backed-Rails-Stack-Part-1/"/>
    <updated>2013-05-26T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/05/26/Learning-Chef-From-Scratch&#8212;Building-a-EC2-backed-Rails-Stack-Part-1</id>
    <content type="html"><![CDATA[<p>Chef is a fantastic tool for automating the process bootstrapping a fresh server so that once you have got it running how you want, replicating that configuration and setup requires very little effort what so ever.</p>

<p>Chef has two different use cases, Chef server (wether that be hosted or private) or Chef Solo. Chef solo allows you to interact directly with the machine your wanting to administrate and is very useful for bootstrapping a vagrant image for instance. Chef Server offers a centralised place for you to push your configurations and recipes so that when working with multiple servers (known as nodes or chef clients) you don&rsquo;t have to update each one individually as each client can be set to poll to server for any updates.</p>

<p>For my first time using chef i through myself straight in at the deep end in that i wanted to put together a full working EC2 instance that would run my usual heroku stack (nginx, unicorn, ruby, rails and postgres). I opted for using Opscodes free Chef hosted plan for my Chef server and got straight to it.</p>

<!-- more -->


<h1>Getting Set Up</h1>

<p>First of head over to <a href="http://www.opscode.com">www.opscode.com</a> and sign up for a free account. There will be three files to download. Your user key, your organisation key and your preconfigured knife.rb file. Download these files and keep them safe for now, we will use them in just a second.</p>

<p>Next we need to get our bootstrapped Chef Repository, this is our blank slate to begin building up our server and its configuration. Grab a empty <a href="http://github.com/opscode/chef-repo/">Chef Repo</a> from opscodes git hub and clone it to where ever you desire.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git clone git@github.com:opscode/chef-repo.git
</span></code></pre></td></tr></table></div></figure>


<p>Next we need to move our .pem and knife.rb files into a .chef folder in this repository. You will most likely have to make the .chef folder.</p>

<p><img src="http://jordanrs.github.io/images/post_images/23-05-26-chef/folder_layout.png" alt="Folder Layout" /></p>

<h1>Gem Time</h1>

<p>Now we have our directory structure in place we should install the gems we need to make the magic happen. A complete guide to setting up chef can be found <a href="http://docs.opscode.com/install_workstation.html">here</a> as I wont go into the details of installing ruby, rvm, bundler etc to enable the installation of gems.</p>

<p>The main gems needed are the <code>chef</code> and <code>knife-ec2</code> gems.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem install chef
</span><span class='line'>gem install kinfe-ec2
</span></code></pre></td></tr></table></div></figure>


<h1>Creating a EC2 instance with knife</h1>

<p>A few prerequisites are needed before we can create instances with knife. First you will need a AWS account which is free and comes with a <a href="http://aws.amazon.com/free/">free usage tier for the first year</a>. Once setup you will need to include your amazon API key and secret into your knife.rb file</p>

<figure class='code'><figcaption><span>knife.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">knife</span><span class="o">[</span><span class="ss">:aws_access_key_id</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;AAAAAAAAAAAAAAAAAAA&quot;</span>
</span><span class='line'><span class="n">knife</span><span class="o">[</span><span class="ss">:aws_secret_access_key</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next set up your default security policy or an alternative one which we can specify when creating the instance, to allow access to port 22, 80 and 443. This is so HTTP, HTTPS and SSH can all be accessed on the created instance.</p>

<p>In the same dashboard go to key pairs panel and create a new security key. The file will automatically download and should be moved into your ~/.ssh folder and the permissions changed to 600 (chmod 600 ~/.ssh/AWS-KEY.pem)</p>

<p>Finally decided what operating system, location, storage and instance size you want. All of these factor into which AMI will be installed on our instance. For instance <a href="http://cloud-images.ubuntu.com/locator/ec2/">this site</a> put together by ubuntu gives you a list of all the different AMIs for the numerous combination of these factors with ubuntu as your base OS.</p>

<p>In my case i went for ami-7962730d which is a eu-west 32bit version of Ubuntu 12.04 for a micro instance.</p>

<p>We are now ready to create our instance using knife, the command to do that is quite large but I shall show you a few things you can move into the knife folder as defaults to make it more manageable</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># run this command to begin boot strapping our server.</span>
</span><span class='line'>
</span><span class='line'>knife ec2 server create -I ami-7962730d -f t1.micro -S knife -i ~/.ssh/AWS-KEY.pem --ssh-user ubuntu --region eu-west-1 -Z eu-west-1a
</span></code></pre></td></tr></table></div></figure>


<p>If you chose a different security group other than the default you can specify it here with the -G &lsquo;group&rsquo; argument and the &mdash;ssh-user argument is ubuntu as that is the default user that comes with the AMI and is needed for us to be able to ssh in with.</p>

<p>All that happens now is a new instance is created and the OS is installed once complete chef automatically SSHs in to the new machine and install chef-client on the server, registers it on on chef server and checks to see if we have specified any roles or recipes, in this instance we haven&rsquo;t.</p>

<h2>Shortening the creation command</h2>

<p>Add the <strong>AWS-KEY.pem</strong> to your ssh agent means you can remove the <code>-i ~/.ssh/AWS-KEY.pem</code> from the command</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ssh-add ~/.ssh/AWS-KEY.pem
</span><span class='line'>
</span><span class='line'><span class="c"># Command now becomes</span>
</span><span class='line'>knife ec2 server create -I ami-7962730d -f t1.micro -S knife --ssh-user ubuntu --region eu-west-1 -Z eu-west-1a
</span></code></pre></td></tr></table></div></figure>


<p>Add <code>knife[:aws_ssh_key_id] = "AWS-KEY"</code> to knife.rb and we can remove -S knife</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>knife ec2 server create -I ami-7962730d -f t1.micro --ssh-user ubuntu --region eu-west-1 -Z eu-west-1a
</span></code></pre></td></tr></table></div></figure>


<p>And finally add availability_zone and region to knife.rb</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>knife<span class="o">[</span>:availability_zone<span class="o">]</span>     <span class="o">=</span> <span class="s1">&#39;eu-west-1a&#39;</span>
</span><span class='line'>knife<span class="o">[</span>:region<span class="o">]</span>                <span class="o">=</span> <span class="s1">&#39;eu-west-1&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>to produce the final command</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>knife ec2 server create -I ami-7962730d -f t1.micro --ssh-user ubuntu
</span></code></pre></td></tr></table></div></figure>


<p>After all its installation is done you should see a read out like so, make a note of the <strong>Instance ID</strong> as this is what chef uses to identify this node.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Instance ID: i-XXXXXXXX
</span><span class='line'>Flavor: t1.micro
</span><span class='line'>Image: ami-7962730d
</span><span class='line'>Region: eu-west-1
</span><span class='line'>Availability Zone: eu-west-1a
</span><span class='line'>Security Groups: default
</span><span class='line'>Tags: <span class="o">{</span><span class="s2">&quot;Name&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;i-XXXXXXXX&quot;</span><span class="o">}</span>
</span><span class='line'>SSH Key: chef-test
</span><span class='line'>
</span><span class='line'>Waiting <span class="k">for </span>instance..............................................
</span><span class='line'>Public DNS Name: ecX-XX-XXX-XXX-X.eu-west-1.compute.amazonaws.com
</span><span class='line'>Public IP Address: XX.XXX.XXX.X
</span><span class='line'>Private DNS Name: ip-XX-XX-XXX-XXX.eu-west-1.compute.internal
</span><span class='line'>Private IP Address: XX.XX.XXX.XXX
</span><span class='line'>
</span><span class='line'>Waiting <span class="k">for </span>sshd....done
</span><span class='line'>Bootstrapping Chef on ec2-XX-XXX-XXX-X.eu-west-1.compute.amazonaws.com
</span></code></pre></td></tr></table></div></figure>


<p>So now we have a node/client associated with our chef server we can begin building up our cookbooks to install our stack which i shall cover in <a href="http://jordanrs.github.io/blog/2013/06/18/learning-chef-from-scratch-building-a-ec2-backed-rails-stack-part-2/">Part 2</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Guard & Spork for auto running of specs]]></title>
    <link href="http://jordanrs.github.io/blog/2013/04/25/installing-guard-and-spork-for-auto-running-of-tests/"/>
    <updated>2013-04-25T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/04/25/installing-guard-and-spork-for-auto-running-of-tests</id>
    <content type="html"><![CDATA[<h2>Gemfile</h2>

<p>Install the following gems with <code>bundle install</code></p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="n">group</span> <span class="ss">:test_envs</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rspec-rails&#39;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 2.0&quot;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;factory_girl_rails&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;faker&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;capybara&#39;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 2.0.2&quot;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;database_cleaner&#39;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 0.9.1&quot;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;launchy&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># file system event triggers for ruby. See note at end about RVM </span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rb-fsevent&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9.3&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Notifications of test states, Requires Growl and growlnotify to be installed</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;growl&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0.3&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Automated test running and speed imporvements</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;guard-rspec&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;guard-spork&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2.0&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;childprocess&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3.6&#39;</span><span class="c1"># this was due to errors appearing in 0.3.7 and higher</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;spork&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9.2&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;debugger&#39;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>spec/spec_helper</h2>

<!-- more -->


<p>Edit spec/spec_helper.rb to look below.</p>

<figure class='code'><figcaption><span>spec/spec_helper.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;spork&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;RAILS_ENV&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;RAILS_ENV&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;development&#39;</span> <span class="p">?</span> <span class="s1">&#39;test&#39;</span> <span class="p">:</span> <span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;RAILS_ENV&quot;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;_test&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nb">require</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">&quot;../../config/environment&quot;</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;rspec/rails&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;rspec/autorun&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s2">&quot;capybara/rspec&quot;</span>
</span><span class='line'><span class="c1">#uncomment the following line to use spork with the debugger</span>
</span><span class='line'><span class="c1"># require &#39;spork/ext/ruby-debug&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">Spork</span><span class="o">.</span><span class="n">prefork</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;database_cleaner&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># if defined? Capybara::Webkit</span>
</span><span class='line'>  <span class="c1">#   Capybara.javascript_driver = :webkit</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">Capybara</span><span class="o">.</span><span class="n">default_wait_time</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">Capybara</span><span class="o">.</span><span class="n">app_host</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span> <span class="o">+</span> <span class="no">Settings</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>  <span class="no">Capybara</span><span class="o">.</span><span class="n">always_include_port</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># if defined? Delayed</span>
</span><span class='line'>  <span class="c1">#   Delayed::Worker.delay_jobs = false</span>
</span><span class='line'>  <span class="c1"># end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Requires supporting ruby files with custom matchers and macros, etc,</span>
</span><span class='line'>  <span class="c1"># in spec/support/ and its subdirectories.</span>
</span><span class='line'>  <span class="no">Dir</span><span class="o">[</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;spec/support/**/*.rb&quot;</span><span class="p">)</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="nb">require</span> <span class="n">f</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">RSpec</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">include</span> <span class="ss">FactoryGirl</span><span class="p">:</span><span class="ss">:Syntax</span><span class="o">::</span><span class="no">Methods</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">extend</span> <span class="no">PaperclipMacros</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">include</span> <span class="no">FacebookMacros</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">include</span> <span class="no">FriendcareBootstrapMacros</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># ## Mock Framework</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># config.mock_with :mocha</span>
</span><span class='line'>    <span class="c1"># config.mock_with :flexmock</span>
</span><span class='line'>    <span class="c1"># config.mock_with :rr</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Remove this line if you&#39;re not using ActiveRecord or ActiveRecord fixtures</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">fixture_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="o">::</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/spec/fixtures&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># If true, the base class of anonymous controllers will be inferred</span>
</span><span class='line'>    <span class="c1"># automatically. This will be the default behavior in future versions of</span>
</span><span class='line'>    <span class="c1"># rspec-rails.</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">infer_base_class_for_anonymous_controllers</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Run specs in random order to surface order dependencies. If you find an</span>
</span><span class='line'>    <span class="c1"># order dependency and want to debug it, you can fix the order by providing</span>
</span><span class='line'>    <span class="c1"># the seed, which is printed after each run.</span>
</span><span class='line'>    <span class="c1">#     --seed 1234</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># If you&#39;re not using ActiveRecord, or you&#39;d prefer not to run each of your</span>
</span><span class='line'>    <span class="c1"># examples within a transaction, remove the following line or assign false</span>
</span><span class='line'>    <span class="c1"># instead of true.</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">use_transactional_fixtures</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># to make sure that each time the test suite is run it is done so against a new </span>
</span><span class='line'>    <span class="c1"># database i use the database_cleaner gem. so add that to your test group in the gem file</span>
</span><span class='line'>    <span class="c1"># add set it up like so</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="ss">:suite</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="no">DatabaseCleaner</span><span class="o">.</span><span class="n">strategy</span> <span class="o">=</span> <span class="ss">:truncation</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="ss">:each</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="no">DatabaseCleaner</span><span class="o">.</span><span class="n">start</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="ss">:each</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="no">DatabaseCleaner</span><span class="o">.</span><span class="n">clean</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Spork</span><span class="o">.</span><span class="n">each_run</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span> <span class="no">QC</span>
</span><span class='line'>    <span class="ss">QC</span><span class="p">:</span><span class="ss">:Conn</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">raw_connection</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>.rspec</h2>

<figure class='code'><figcaption><span>.rspec</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">--</span><span class="nb">format</span> <span class="n">documentation</span> <span class="o">--</span><span class="n">color</span> <span class="o">--</span><span class="n">drb</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Guardfile</h2>

<p>Running run <code>guard init rspec</code> and <code>guard init spork</code> will produce a Guardfile similar to the one below. Not the additions of <code>cucumber: false,  test_unit: false, :wait =&gt; 45</code> to the spork call as leaving them out without test unit or cucumber configured can result in errors.</p>

<p>We also make an addition to the rspec guard call <code>:cli =&gt; '--drb'</code> so that it runs through spoke using distributed ruby</p>

<figure class='code'><figcaption><span>Guardfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># A sample Guardfile</span>
</span><span class='line'><span class="c1"># More info at https://github.com/guard/guard#readme</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;active_support/core_ext&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">guard</span> <span class="s1">&#39;spork&#39;</span><span class="p">,</span> <span class="ss">:rspec_env</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;RAILS_ENV&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sexyjordan_test&#39;</span> <span class="p">},</span> <span class="ss">cucumber</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>  <span class="n">test_unit</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:wait</span> <span class="o">=&gt;</span> <span class="mi">45</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;config/application.rb&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;config/environment.rb&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^config/environments/.+\.rb$}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^config/initializers/.+\.rb$}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;Gemfile&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;Gemfile.lock&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;spec/spec_helper.rb&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># watch(&#39;test/test_helper.rb&#39;)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;spec/support/&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">guard</span> <span class="s1">&#39;rspec&#39;</span><span class="p">,</span> <span class="ss">:all_after_pass</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:cli</span> <span class="o">=&gt;</span> <span class="s1">&#39;--drb&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/.+_spec\.rb$}</span><span class="p">)</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^lib/(.+)\.rb$}</span><span class="p">)</span>     <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/lib/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;spec/spec_helper.rb&#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="s2">&quot;spec&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Rails example</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/(.+)\.rb$}</span><span class="p">)</span>                           <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/(.*)(\.erb|\.haml)$}</span><span class="p">)</span>                 <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/controllers/(.+)_(controller)\.rb$}</span><span class="p">)</span>  <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="o">[</span><span class="s2">&quot;spec/routing/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_routing_spec.rb&quot;</span><span class="p">,</span> <span class="s2">&quot;spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">s/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span><span class="p">,</span> <span class="s2">&quot;spec/acceptance/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span><span class="o">]</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/support/(.+)\.rb$}</span><span class="p">)</span>                  <span class="p">{</span> <span class="s2">&quot;spec&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;config/routes.rb&#39;</span><span class="p">)</span>                           <span class="p">{</span> <span class="s2">&quot;spec/routing&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="s1">&#39;app/controllers/application_controller.rb&#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="s2">&quot;spec/controllers&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/models/(.+)\.rb$}</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/models/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/services/(.+)\.rb$}</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/services/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Capybara features specs</span>
</span><span class='line'>  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/views/(.+)/.*\.(erb|haml)$}</span><span class="p">)</span>          <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">&quot;spec/features/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb&quot;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h1>Testing with queue classic</h1>

<p>Using queue classic, spork and rspec. If the QC setup shares the rails connection to the database we need to add this to the each run command in spork</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Spork</span><span class="o">.</span><span class="n">each_run</span> <span class="k">do</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span> <span class="no">QC</span>
</span><span class='line'>    <span class="ss">QC</span><span class="p">:</span><span class="ss">:Conn</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">raw_connection</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h1>FactoryGirl Cleaner Syntax</h1>

<p>Adding</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">RSpec</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">include</span> <span class="ss">FactoryGirl</span><span class="p">:</span><span class="ss">:Syntax</span><span class="o">::</span><span class="no">Methods</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Means we can now call build, create, createlist, withouth FactoryGirl infront</p>

<h1>Paperclip and factory girl together</h1>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">FactoryGirl</span><span class="o">.</span><span class="n">define</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">factory</span> <span class="ss">:timeline_memory</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>     <span class="n">image</span> <span class="p">{</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:Test</span><span class="o">::</span><span class="no">UploadedFile</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">Rails</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;spec&#39;</span><span class="p">,</span> <span class="s1">&#39;assets&#39;</span><span class="p">,</span> <span class="s1">&#39;test_memory.jpg&#39;</span><span class="p">),</span> <span class="s1">&#39;image/jpg&#39;</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h1>Notes</h1>

<p>Auto detection didnt work with rvm and 1.9.2 straight away. Ruby had to be recompiled with an additional flag to deal with file system events the way we want. The fix is taken from <a href="https://github.com/guard/guard/wiki/Add-proper-Readline-support-to-Ruby-on-Mac-OS-X">here</a></p>

<h2>Using RVM</h2>

<p>You can use RVM to build your Ruby with GNU readline support. First install the readline package with RVM:</p>

<pre><code>$ rvm pkg install readline --verify-downloads 1
</code></pre>

<p>Then configure RVM to use the readline package by adding</p>

<pre><code>ruby_configure_flags=--with-readline-dir="$rvm_path/usr"
</code></pre>

<p>to <code>~/.rvm/user/db</code>. Finally you need to reinstall your Ruby of choice:</p>

<pre><code>$ rvm reinstall 1.9.3
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Multiple Test Environments in Rails]]></title>
    <link href="http://jordanrs.github.io/blog/2013/04/23/multiple-test-enviroments/"/>
    <updated>2013-04-23T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/04/23/multiple-test-enviroments</id>
    <content type="html"><![CDATA[<p>Multiple test enviorments allow for developers with different DB settings, gem desires to be able to setup and run the same test suite independently of one another.</p>

<!-- more -->


<p>Create the file <code>config/enviroments/jordan_test.rd</code> and copy into it the contents of <code>config/enviroments/test.rb</code>
Via command line from application root:  <code>cp config/environments/test.rb config/environments/jordan_test.rb</code></p>

<p>in config/database.yml add your DB settings (assumes using Postgres)</p>

<figure class='code'><figcaption><span>database.yml </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">jordan_test</span><span class="p">:</span>
</span><span class='line'>  <span class="ss">adapter</span><span class="p">:</span> <span class="n">postgresql</span>
</span><span class='line'>  <span class="ss">encoding</span><span class="p">:</span> <span class="n">utf8</span>
</span><span class='line'>  <span class="ss">host</span><span class="p">:</span> <span class="n">localhost</span>
</span><span class='line'>  <span class="ss">database</span><span class="p">:</span> <span class="o">[</span><span class="n">project_name</span><span class="o">]</span><span class="n">_jordan_test</span>
</span><span class='line'>  <span class="ss">username</span><span class="p">:</span>
</span><span class='line'>  <span class="ss">password</span><span class="p">:</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create the new database</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rake db:create:all
</span></code></pre></td></tr></table></div></figure>


<p>add environment to any :test specific gems or gem groups in your gem file</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">group</span> <span class="ss">:test</span><span class="p">,</span> <span class="ss">:jordan_test</span> <span class="k">do</span>
</span><span class='line'>    <span class="c1">#blaaaaa........</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>
or make a bundler group in application.rb so others envs can be added easier.</p>

<figure class='code'><figcaption><span>config/application.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">Bundler</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># If you precompile assets before deploying to production, use this line</span>
</span><span class='line'>  <span class="no">Bundler</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="o">*</span><span class="no">Rails</span><span class="o">.</span><span class="n">groups</span><span class="p">(</span><span class="ss">:assets</span> <span class="o">=&gt;</span> <span class="sx">%w(development test steve cronin sexyjordan_test)</span><span class="p">,</span> <span class="ss">:test_envs</span> <span class="o">=&gt;</span> <span class="sx">%w(test sexyjordan_test)</span><span class="p">))</span>
</span><span class='line'>  <span class="c1"># If you want your assets lazily compiled in production, use this line</span>
</span><span class='line'>  <span class="c1"># Bundler.require(:default, :assets, Rails.env)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Usual run rake <code>db:test:prepare</code> or <code>db:test:clone</code> instead possible to run <code>rake db:migrate RAILS_ENV=jordan_test</code> perhaps make an alias for this in your .bash_profile</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Strong Parameters and Tolk Gem]]></title>
    <link href="http://jordanrs.github.io/blog/2013/04/05/strong-parameters-and-tolk-gem/"/>
    <updated>2013-04-05T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2013/04/05/strong-parameters-and-tolk-gem</id>
    <content type="html"><![CDATA[<p>To get the tolk gem to work along side the Strong Parameters gem we need to apply a monkey patch to tolk</p>

<figure class='code'><figcaption><span>config/initalizers/tolk.rb    </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">Tolk</span><span class="p">:</span><span class="ss">:LocalesController</span><span class="o">.</span><span class="n">class_eval</span> <span class="k">do</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>      <span class="ss">Tolk</span><span class="p">:</span><span class="ss">:Locale</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:tolk_locale</span><span class="o">].</span><span class="n">try</span><span class="p">(</span><span class="ss">:permit!</span><span class="p">))</span>
</span><span class='line'>      <span class="n">redirect_to</span> <span class="ss">:action</span> <span class="o">=&gt;</span> <span class="ss">:index</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Making a gem]]></title>
    <link href="http://jordanrs.github.io/blog/2013/02/21/making-a-gem/"/>
    <updated>2013-02-21T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2013/02/21/making-a-gem</id>
    <content type="html"><![CDATA[<p>As to not forget the process of packaging up a gem and putting it on my own hosting just follow these simple tests :&ndash;</p>

<!-- more -->


<p>1) Firstly make sure the <code>PROJECT_NAME.gemspec</code> file is up to date and you have updated the <code>version.rb</code> file to the correct version.</p>

<p>2) run the command</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem build mention-tagger.gemspec
</span><span class='line'><span class="c"># or</span>
</span><span class='line'>rake build
</span></code></pre></td></tr></table></div></figure>


<p>that should put a gem file in the root directory with the name <code>PROJECT_NAME-VERSION.gem</code> or in <code>pkg/PROJECT_NAME-VERSION.gem</code></p>

<p>To publish to your own gem host</p>

<p>1) First set up geminabox as per these <a href="https://github.com/cwninja/geminabox">instructions</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem install geminabox
</span></code></pre></td></tr></table></div></figure>


<p>2) then gem inabox <code>PROJECT_NAME-VERSION.gem</code></p>

<p>it&rsquo;ll ask for url</p>

<p>3) put in your gem host</p>

<p>and away she goes</p>

<h2>Get it straight from git</h2>

<p>Two ways</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="mi">1</span><span class="o">.</span> <span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">&#39;git://github.com/rails/rails.git&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># or equivalently</span>
</span><span class='line'>
</span><span class='line'><span class="mi">2</span><span class="o">.</span> <span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="ss">:githib</span> <span class="o">=&gt;</span> <span class="s1">&#39;rails/rails&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>which is just <em>USERNAME/PROJECT_NAME</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ActiveAdmin - Customising export links]]></title>
    <link href="http://jordanrs.github.io/blog/2013/02/12/activeadmin---customising-export-links/"/>
    <updated>2013-02-12T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2013/02/12/activeadmin&#8212;customising-export-links</id>
    <content type="html"><![CDATA[<p>When using active admin there doesn&rsquo;t seem to be an easy way to format the output of the JSON and XML export options like you can with the CSV option.</p>

<p>A nice patch by <a href="https://coderwall.com/p/qzlssg">David Collom</a> allows us to customise what is displayed rather then just hiding it in CSS. The patch is as follows and i just placed it at the top of one of my <code>admin/###.rb</code> files</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">ActiveAdmin</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">Views</span>
</span><span class='line'>    <span class="k">class</span> <span class="nc">PaginatedCollection</span>
</span><span class='line'>      <span class="k">def</span> <span class="nf">build_pagination_with_formats</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span class='line'>        <span class="n">div</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="s2">&quot;index_footer&quot;</span> <span class="k">do</span>
</span><span class='line'>          <span class="n">build_pagination</span>
</span><span class='line'>          <span class="n">div</span><span class="p">(</span><span class="n">page_entries_info</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="o">.</span><span class="n">html_safe</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">&quot;pagination_information&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="n">build_download_format_links</span><span class="p">(</span><span class="o">[</span><span class="ss">:csv</span><span class="o">]</span><span class="p">)</span> <span class="k">unless</span> <span class="vi">@download_links</span> <span class="o">==</span> <span class="kp">false</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>To customise what is displayed simplay change the array passing into <code>build_download_format_links()</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">build_download_format_links</span><span class="p">(</span><span class="o">[</span><span class="ss">:csv</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'><span class="n">build_download_format_links</span><span class="p">(</span><span class="o">[</span><span class="ss">:csv</span><span class="p">,</span> <span class="ss">:json</span><span class="o">]</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[S3 Static Assets Group Policy]]></title>
    <link href="http://jordanrs.github.io/blog/2013/02/10/s3-static-assets-group-policy/"/>
    <updated>2013-02-10T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2013/02/10/s3-static-assets-group-policy</id>
    <content type="html"><![CDATA[<p>I always struggle to remember / find the group security policy for an S3 bucket to make all files available to the public.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;Version&quot;</span><span class="o">:</span> <span class="s2">&quot;2008-10-17&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Statement&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="s2">&quot;Sid&quot;</span><span class="o">:</span> <span class="s2">&quot;AllowPublicRead&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;Effect&quot;</span><span class="o">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;Principal&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>              <span class="s2">&quot;AWS&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;s3:GetObject&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;Resource&quot;</span><span class="o">:</span> <span class="s2">&quot;arn:aws:s3:::BUCKET-NAME/*&quot;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>
The only thing that can be changed is the BUCKET-NAME, leave all other aspects of the policy the same.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Heroku Optimisations - Unicorn, S3 and Cloudfront]]></title>
    <link href="http://jordanrs.github.io/blog/2013/02/10/heroku-optimisations---unicorn-s3-and-cloudfront/"/>
    <updated>2013-02-10T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2013/02/10/heroku-optimisations&#8212;unicorn-s3-and-cloudfront</id>
    <content type="html"><![CDATA[<p>As part of my continued learnings as a rails developer I had some free time during the week and looked into optimising heroku to make my rails apps far more efficient and effective. When i tested unicorn it showed itself to be a awesomely efficient application server giving you far more bang for your buck on heroku. Heres a quick guide of how I set up unicorn and some additional optimisations using s3 and cloudfront to serve my files that will now become my default set up to get the most out of my dynos.</p>

<!-- more -->


<p><strong>Setting up Unicorn</strong></p>

<p><a href="https://github.com/defunkt/unicorn">Unicorn</a> is a HTTP server available for rails and other ruby frameworks that increase concurrency and the performance of your apps without having to increase the number of dynos (for a better explanation on the fundamentals of concurrency see this <a href="http://merbist.com/2011/02/22/concurrency-in-ruby-explained/">excellent post</a>). It does this by spawning extra processes to deal with incoming requests. It rocks, and showed itself to out perform the other popular ruby HTTP servers by a significant margin.</p>

<p>1) Install the Unicorn gem into your gem file</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;unicorn&#39;</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>2) replace the current <code>web:</code> line in your procfile with</p>

<figure class='code'><figcaption><span>Procfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">web</span><span class="p">:</span> <span class="n">bundle</span> <span class="nb">exec</span> <span class="n">unicorn_rails</span> <span class="o">-</span><span class="nb">p</span> <span class="vg">$PORT</span> <span class="o">-</span><span class="n">c</span> <span class="o">.</span><span class="n">/config</span><span class="o">/</span><span class="n">unicorn</span><span class="o">.</span><span class="n">rb</span>
</span></code></pre></td></tr></table></div></figure>


<p>3) create a unicorn.rb file in the config directory with the following contents</p>

<figure class='code'><figcaption><span>config/unicorn.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># If you have a very small app you may be able to</span>
</span><span class='line'><span class="c1"># increase this, but in general 3 workers seems to</span>
</span><span class='line'><span class="c1"># work best</span>
</span><span class='line'>
</span><span class='line'><span class="n">worker_processes</span> <span class="mi">3</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Load your app into the master before forking</span>
</span><span class='line'><span class="c1"># workers for super-fast worker spawn times</span>
</span><span class='line'>
</span><span class='line'><span class="n">preload_app</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Immediately restart any workers that</span>
</span><span class='line'><span class="c1"># haven&#39;t responded within 30 seconds</span>
</span><span class='line'>
</span><span class='line'><span class="n">timeout</span> <span class="mi">30</span>
</span><span class='line'>
</span><span class='line'><span class="n">before_fork</span> <span class="k">do</span> <span class="o">|</span><span class="n">server</span><span class="p">,</span> <span class="n">worker</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Replace with MongoDB or whatever</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="p">)</span>
</span><span class='line'>    <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">disconnect!</span>
</span><span class='line'>    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Disconnected from ActiveRecord&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># If you are using Redis but not Resque, change this</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">Resque</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Resque</span><span class="o">.</span><span class="n">redis</span><span class="o">.</span><span class="n">quit</span>
</span><span class='line'>    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Disconnected from Redis&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">sleep</span> <span class="mi">1</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">after_fork</span> <span class="k">do</span> <span class="o">|</span><span class="n">server</span><span class="p">,</span> <span class="n">worker</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Replace with MongoDB or whatever</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="p">)</span>
</span><span class='line'>    <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">establish_connection</span>
</span><span class='line'>    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Connected to ActiveRecord&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># If you are using Redis but not Resque, change this</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">Resque</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Resque</span><span class="o">.</span><span class="n">redis</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;REDIS_URI&#39;</span><span class="o">]</span>
</span><span class='line'>    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Connected to Redis&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>4) finally set up logging so it use STDOUT in the application class of config/application.rb</p>

<figure class='code'><figcaption><span>config/application.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="no">Logger</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">STDOUT</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The additions of the config file and logger changes fix a few issues that can happen when workers are being spawned/terminated, when adding certain gems like new relic or redis and making sure we get logging information reported correctly.</p>

<p>Thats all there is to setting up unicorn on heroku. On the next deployment to heroku it should start the application running on unicorn with however many workers you specified. To check its working you can see it launch the unicorn server and spawn workers by doing <code>heroku logs --tail</code> whilst deploying.</p>

<p>Iv found that 3 workers works best as any higher you risk breaching heroku&rsquo;s 512mb memory limit per dyno, but you can experiment depending on your application size.</p>

<p><strong>Setting up s3 assets</strong></p>

<p>The easiest way to serve your assets from the cloud is to use the [asset sync gem] (<a href="https://github.com/rumblelabs/asset_sync">https://github.com/rumblelabs/asset_sync</a>). It simplifies dumping your assets to the cloud, when you run <code>rake assets:precompile</code> (done by default when pushing to heroku) your compiled assets will automatically sent over to the cloud, whether thats Amazon S3, Google Storage or Rackspace. The good news is its also very easy to set up. For this setup I am using S3 and assume you have already set up a bucket and added the correct group policy</p>

<p>1) Add the asset sync gem to your gem file</p>

<figure class='code'><figcaption><span>Gemfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">group</span> <span class="ss">:assets</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;asset_sync&#39;</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>2) in <code>production.rb</code> add our asset host</p>

<figure class='code'><figcaption><span>config/environments/production.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">action_controller</span><span class="o">.</span><span class="n">asset_host</span> <span class="o">=</span> <span class="s2">&quot;//</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;FOG_DIRECTORY&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">.s3.amazonaws.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We chose this url over the other style <code>//s3.amazonaws.com/#{ENV['FOG_DIRECTORY']}</code> as we can then have our bucket in any region &ndash; using the second style results in a 301 moved permanently due to reasons explained <a href="https://forums.aws.amazon.com/thread.jspa?threadID=17989">here</a>. There is one caveat however and that is that the bucket name cannot contain any periods (.&rsquo;s) as this will break the ssl certificates over https.</p>

<p>3) make sure the following are set in <code>production.rb</code></p>

<figure class='code'><figcaption><span>config/environments/production.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">digest</span> <span class="o">=</span> <span class="kp">true</span><span class="o">.</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kp">true</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>4) One thing that we do is serve out staging assets and production assets from the same bucket. To do this we can add a asset prefix to our environments config file that declares the place the files should be stored within the bucket.</p>

<figure class='code'><figcaption><span>config/environments/production.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;/production/assets&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>5) add in the following environment variables on heroku</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>heroku config:add <span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>xxxx
</span><span class='line'>heroku config:add <span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>xxxx
</span><span class='line'>heroku config:add <span class="nv">FOG_DIRECTORY</span><span class="o">=</span>xxxx  <span class="c"># ( this is the bucket name )</span>
</span><span class='line'>heroku config:add <span class="nv">FOG_PROVIDER</span><span class="o">=</span>AWS
</span><span class='line'>
</span><span class='line'><span class="c"># and optionally:</span>
</span><span class='line'>
</span><span class='line'>heroku config:add <span class="nv">FOG_REGION</span><span class="o">=</span>eu-west-1
</span><span class='line'>heroku config:add <span class="nv">ASSET_SYNC_GZIP_COMPRESSION</span><span class="o">=</span><span class="nb">true</span>
</span><span class='line'>heroku config:add <span class="nv">ASSET_SYNC_MANIFEST</span><span class="o">=</span><span class="nb">true</span>
</span><span class='line'>heroku config:add <span class="nv">ASSET_SYNC_EXISTING_REMOTE_FILES</span><span class="o">=</span>keep
</span></code></pre></td></tr></table></div></figure>


<p>6) finally we need to make sure these variables are available to heroku at asset compilation time so run this from the console in your app root directory</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>heroku labs:enable user-env-compile -a myapp
</span></code></pre></td></tr></table></div></figure>


<p><strong>Setting up CloudFront to serve our files even faster</strong></p>

<p>Using a CDN to serve our assets instead of S3 or even the app itself will help improve load times and decrease requests to our app as assets get delivered from a data centre closer to the end users location. Setting up a CloudFront distribution for use with our rails app requires no special configuration options so selecting our bucket and using all the default options will be fine. If you&rsquo;ve used a CDN before you may have had problems expiring files once you&rsquo;ve made changes to them. Thanks to the asset pipeline that comes with rails we don&rsquo;t need to worry about this due to the unique identifier hash that gets appended onto the end of the file name before its extension.</p>

<p>So after our distribution has completed downloading the assets from the bucket we will be given a CloudFront url. All we need to do once we have this url is change our asset host to point to this url</p>

<figure class='code'><figcaption><span>config/environments/production.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">action_controller</span><span class="o">.</span><span class="n">asset_host</span> <span class="o">=</span> <span class="s2">&quot;d1aa907b1q1s7qd.cloudfront.net&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>  <br/>
Now when you make any changes to files and push them to heroku these new files with there unique hashes will get pushed to over to S3 and be different than the previous version. When the first user requests this new file from the CDN it wont be present so amazon is clever enough to attempt to fetch it from the bucket and save it to the CDN ready for the next person</p>

<p><strong>Setting up paperclip to use CloudFront</strong></p>

<p><a href="https://github.com/thoughtbot/paperclip">Paperclip</a> is great for dealing with file attachments and automatically saving things onto S3, but we could optimise this to use CloudFront instead. Its very easy to implement. Once your bucket is set up and files are being saved by paperclip to it, all thats needed is to change the following settings</p>

<p>1) Add in an :s3_host_alias</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">:s3_host_alias</span> <span class="o">=&gt;</span> <span class="s1">&#39;d1aa907b1q1s7qd.cloudfront.net&#39;</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>2) Change :url property to use &ldquo;:s3_alias_url&rdquo;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s2">&quot;:s3_alias_url&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>notice the symbol is wrapped in a string</p>

<p>And thats it, your uploaded content will now be served over CloudFront and not directly from s3</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Final Year Project Video Demonstration]]></title>
    <link href="http://jordanrs.github.io/blog/2012/04/09/final-year-project-video-demonstration/"/>
    <updated>2012-04-09T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2012/04/09/final-year-project-video-demonstration</id>
    <content type="html"><![CDATA[<p>For any one who wishes to know what Music Technology at Edinburgh actually means? well this is what i created for my final year project, a literal creative fusion of music and technology! Enjoy!</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/DMitUrW-OXI" frameborder="0" > </iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[3D Kinect - Kinect SDK, XNA, Max/Msp and Voice Control]]></title>
    <link href="http://jordanrs.github.io/blog/2011/11/21/3D-kinect---kinect-SDK-XNA-maxmsp-and-voice-control/"/>
    <updated>2011-11-21T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2011/11/21/3D-kinect&#8212;kinect-SDK-XNA-maxmsp-and-voice-control</id>
    <content type="html"><![CDATA[<p>Its been a little quiet on the blog front, but many things have been programmed and I just haven&rsquo;t had the time to update this.</p>

<p>I just wanted to post a recent Kinect based development which is using the Kinect in a 3D environment</p>

<p>Check out the video below. Any questions or if you want the source just let me know</p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/KS_6sXLS788" frameborder="0"> </iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Max/Msp to Kinect Via OSC for Offical Microsoft SDK]]></title>
    <link href="http://jordanrs.github.io/blog/2011/08/25/MaxMsp-to-Kinect-Via-OSC-for-Offical-Microsoft-SDK/"/>
    <updated>2011-08-25T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2011/08/25/MaxMsp-to-Kinect-Via-OSC-for-Offical-Microsoft-SDK</id>
    <content type="html"><![CDATA[<p><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 400px; height: 160px;" src="http://4.bp.blogspot.com/-N6x0K1PfpZ4/TlZYCw94AKI/AAAAAAAABYg/UZbQXeWYNKk/s400/screenshot.jpg" alt="" id="BLOGGER_PHOTO_ID_5644795987482902690" border="0" /></p>

<p>Today I finished the very first stages of my 4th year research project which was finding a way to take data from the Xbox Kinect and send it to Max/Msp. By using the <a href="http://opensoundcontrol.org/implementation/osc-net-v1-2">Ventuz OSC</a> C# wrapper i was able to pack all the X, Y, Z data for all the skeletal points into an OSC bundle and send that to Max where it was unpacked in the patch.</p>

<p>The data sent from the Kinect is the unchanged co-ordinate system of values in metres rangeing from -1 to 1.</p>

<p>That being said the data sent from Kinect to Max can be used by any device that is capable of reading OSC packets .The format of the OSC message is</p>

<p><code>/joint/skeleton_[1/2]/[joint] x, y, z</code></p>

<p>This is a simple implementation allows quick and easy access to the full power of the kinects skeletal tracking in windows for users of the offical SDK over OSC. I hope it can be of some use.</p>

<p><a href="https://sites.google.com/site/jordanrsblog/KinecttoMax.zip?attredirects=0&amp;d=1">Download Location 1</a></p>

<p><a href="http://www.mediafire.com/?ljoxdh01fdorgmd">MediaFire Mirror</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chaos Music - The Final Piece]]></title>
    <link href="http://jordanrs.github.io/blog/2011/04/30/Chaos-Music---The-Final-Piece/"/>
    <updated>2011-04-30T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2011/04/30/Chaos-Music&#8212;The-Final-Piece</id>
    <content type="html"><![CDATA[<p>Chaos music is a composition based on my research and programming of the functions documented in <a href="http://jordanrs.blogspot.com/2011/04/algorithmic-comp-piece-2-research-choas.html">my previous post.</a>  The piece uses the output data from the chaotic functions to drive musical synthesis with the built in functions of CLM, more explanation about methodology can be found in the attached report.</p>

<p><strong>Final Piece</strong></p>

<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F102117823&amp;color=ff6600&amp;auto_play=false&amp;show_artwork=false"></iframe>


<p><strong>Download Source and Report</strong></p>

<p><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 287px; height: 400px;" src="http://2.bp.blogspot.com/-PqHESAb3dX0/TbxzzLXTW6I/AAAAAAAABXI/ZIrSRy9qfPU/s400/algocomp.jpg" alt="" id="BLOGGER_PHOTO_ID_5601479359603104674" border="0" /></p>

<p><a href="https://sites.google.com/site/jordanrsblog/algorithmiccomp/Project2.zip"><br />Download</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Algorithmic Comp. Piece 2 Research - Chaos Functions]]></title>
    <link href="http://jordanrs.github.io/blog/2011/04/30/Algorithmic-Composition-Piece-2-Research---Choas-Functions/"/>
    <updated>2011-04-30T00:00:00+01:00</updated>
    <id>http://jordanrs.github.io/blog/2011/04/30/Algorithmic-Composition-Piece-2-Research&#8212;Choas-Functions</id>
    <content type="html"><![CDATA[<p>For my final year piece iv been researching chaotic functions and non-linear maps. Below is a selection of function iv ported into Lisp. Each function outputs a text file that can be imported into most graphing software (the corresponding pictures were all produced with MATLAB). I intend to implement these functions and use there output to drive a piece of music.</p>

<p><strong>The Logistic Equation</strong></p>

<p><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 302px; height: 298px;" src="http://4.bp.blogspot.com/-E1OToaCO-yg/TbxIpC3F1fI/AAAAAAAABU4/8soPQ8FU69Y/s320/logistic.jpg" alt="" id="BLOGGER_PHOTO_ID_5601431906521830898" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;logistic.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                  <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span>  <span class="p">((</span><span class="nv">x</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">r-env</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">1000</span> <span class="mf">4.0</span><span class="p">))</span>
</span><span class='line'> <span class="p">(</span><span class="nv">r</span> <span class="mf">0.0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>   <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">r</span> <span class="p">(</span><span class="nv">envelope-interp</span> <span class="nv">i</span> <span class="nv">r-env</span><span class="p">)</span>
</span><span class='line'>     <span class="nv">x</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">r</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">-</span> <span class="mi">1</span> <span class="nv">x</span><span class="p">))))</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">r</span> <span class="nv">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Henon Map</strong></p>

<!--more-->


<p><img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 256px;" src="http://3.bp.blogspot.com/-6WhbHPFz2VU/TbxYE4-VJCI/AAAAAAAABVA/uQxuuX5kwGg/s320/henon.jpg" alt="" id="BLOGGER_PHOTO_ID_5601448877578593314" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;henon.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                  <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">y</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">a</span> <span class="mf">1.4</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b</span> <span class="mf">0.3</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">500</span> <span class="nb">do</span>
</span><span class='line'> <span class="p">(</span><span class="nb">setf</span> <span class="nv">z</span> <span class="nv">x</span>
</span><span class='line'>    <span class="nv">x</span> <span class="p">(</span><span class="nb">-</span><span class="p">(</span><span class="nb">+</span> <span class="nv">y</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>
</span><span class='line'>    <span class="nv">y</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">b</span> <span class="nv">z</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Lorenz Attractor</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 300px; height: 320px;" src="http://4.bp.blogspot.com/-GlNo5diFAZo/TbxZqaGYVlI/AAAAAAAABVI/zXK9B45Av9Y/s320/lorenz.jpg" alt="" id="BLOGGER_PHOTO_ID_5601450621637514834" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;lorenz.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                             <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x1</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">y1</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z1</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">dt</span> <span class="mf">0.001</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">x</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">y</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">a</span> <span class="mi">10</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">8</span> <span class="mi">3</span><span class="p">))</span>
</span><span class='line'> <span class="p">(</span><span class="nv">p</span> <span class="mi">28</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">y1</span> <span class="nv">x1</span><span class="p">))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">y</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">y1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">y1</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">p</span> <span class="nv">z1</span><span class="p">)))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">z</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">z1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="nv">y1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">b</span> <span class="nv">z1</span><span class="p">))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">x1</span> <span class="nv">x</span>
</span><span class='line'>     <span class="nv">y1</span> <span class="nv">y</span>
</span><span class='line'>     <span class="nv">z1</span> <span class="nv">z</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D ~D~%&quot;</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">z</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Ikeda Map</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 276px; height: 320px;" src="http://4.bp.blogspot.com/-GWcUIpsnOOc/TbxamvvnwOI/AAAAAAAABVQ/95bnAwy3KA8/s320/ikeda.jpg" alt="" id="BLOGGER_PHOTO_ID_5601451658239787234" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;ikeda.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                               <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">y</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">u</span> <span class="mf">0.95</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b</span> <span class="mf">0.0</span><span class="p">))</span>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">z</span> <span class="nv">x</span>
</span><span class='line'>     <span class="nv">b</span> <span class="p">(</span><span class="nb">-</span> <span class="mf">0.4</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">6</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">y</span> <span class="nv">y</span><span class="p">)))))</span>
</span><span class='line'>     <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">u</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">cos</span> <span class="nv">b</span><span class="p">))</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">y</span> <span class="p">(</span><span class="nb">sin</span> <span class="nv">b</span><span class="p">)))))</span>
</span><span class='line'>     <span class="nv">y</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">u</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">z</span> <span class="p">(</span><span class="nb">sin</span> <span class="nv">b</span><span class="p">))</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">y</span> <span class="p">(</span><span class="nb">cos</span> <span class="nv">b</span><span class="p">)))))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Tent Map</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 320px;" src="http://1.bp.blogspot.com/-9Lpgb5RcTPY/TbxbjFJq4kI/AAAAAAAABVY/oh7uzLHqos8/s320/tent.jpg" alt="" id="BLOGGER_PHOTO_ID_5601452694778339906" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;tent.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">u</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">u-env</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">1000</span> <span class="mf">2.0</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nv">&amp;lt</span><span class="c1">; x 0.5)</span>
</span><span class='line'>   <span class="p">(</span><span class="k">progn</span>
</span><span class='line'>   <span class="p">(</span><span class="nb">setf</span> <span class="nv">u</span> <span class="p">(</span><span class="nv">envelope-interp</span> <span class="nv">i</span> <span class="nv">u-env</span><span class="p">)</span>
</span><span class='line'>      <span class="nv">x</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">u</span> <span class="nv">x</span><span class="p">))</span>
</span><span class='line'>   <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">x</span> <span class="nv">u</span><span class="p">))</span>
</span><span class='line'>   <span class="p">(</span><span class="k">progn</span>
</span><span class='line'>   <span class="p">(</span><span class="nb">setf</span> <span class="nv">u</span> <span class="p">(</span><span class="nv">envelope-interp</span> <span class="nv">i</span> <span class="nv">u-env</span><span class="p">)</span>
</span><span class='line'>      <span class="nv">x</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">u</span> <span class="p">(</span><span class="nb">-</span> <span class="mi">1</span> <span class="nv">x</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'>   <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">u</span> <span class="nv">x</span><span class="p">))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p><strong>The Gauss Iterated Map</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 258px;" src="http://1.bp.blogspot.com/-SmYtPew_6nY/TbxciohI0TI/AAAAAAAABVg/UbPoMLPtdrQ/s320/gauss.jpg" alt="" id="BLOGGER_PHOTO_ID_5601453786603770162" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;gauss.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span>  <span class="p">((</span><span class="nv">x</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">a</span> <span class="mf">6.2</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b-env</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">-1</span> <span class="mi">500</span> <span class="mi">1</span><span class="p">))</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b</span> <span class="mf">0.0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>   <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">500</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">b</span> <span class="p">(</span><span class="nv">envelope-interp</span> <span class="nv">i</span> <span class="nv">b-env</span><span class="p">)</span>
</span><span class='line'>     <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">exp</span><span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">-1</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))))</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">i</span> <span class="nv">x</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Tinkerbell Map</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 284px;" src="http://1.bp.blogspot.com/-I37WgDY5-Yg/TbxdO8MjqEI/AAAAAAAABVo/POBxhfgV6ng/s320/tinkerbelle.jpg" alt="" id="BLOGGER_PHOTO_ID_5601454547800401986" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;tinkbell.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mf">-0.72</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">y</span> <span class="mf">-0.64</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">a</span> <span class="mf">0.9</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">b</span> <span class="mf">-0.6013</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">c</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">d</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">2500</span> <span class="nb">do</span>
</span><span class='line'> <span class="p">(</span><span class="nb">setf</span> <span class="nv">z</span> <span class="nv">x</span>
</span><span class='line'>    <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">b</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">y</span> <span class="nv">y</span><span class="p">))))</span>
</span><span class='line'>    <span class="nv">y</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">d</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">c</span> <span class="nv">z</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">2</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">z</span> <span class="nv">y</span><span class="p">)))))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Rabinovich-Fabrikant Equation</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 271px;" src="http://4.bp.blogspot.com/-gIz3Lb1N7ag/TbxeMisXZLI/AAAAAAAABVw/uH4KW7rAB_8/s320/rf.jpg" alt="" id="BLOGGER_PHOTO_ID_5601455606106383538" border="0" /></p>

<p>The graph may not look like those from other resources but that&rsquo;s because it was not ran over enough iterations, changing the loop value to over 1000 produces the main graph shape.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;rabfab.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                  <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x1</span> <span class="mf">-1.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">y1</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z1</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">dt</span> <span class="mf">0.01</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">x</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">y</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">a</span> <span class="mf">0.14</span><span class="p">)</span>
</span><span class='line'> <span class="p">(</span><span class="nv">g</span> <span class="mf">0.1</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">g</span> <span class="nv">x1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">y1</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="nv">x1</span><span class="p">)</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">z1</span> <span class="mi">1</span><span class="p">))))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">y</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">y1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">g</span> <span class="nv">y1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">3</span> <span class="nv">z1</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="nv">x1</span><span class="p">))))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">z</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">z1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">2</span> <span class="mi">-1</span><span class="p">)</span> <span class="nv">z1</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="nv">y1</span><span class="p">))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">x1</span> <span class="nv">x</span>
</span><span class='line'>     <span class="nv">y1</span> <span class="nv">y</span>
</span><span class='line'>     <span class="nv">z1</span> <span class="nv">z</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D ~D~%&quot;</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">1000</span> <span class="nv">z</span><span class="p">)))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Torus Knot</strong>
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 320px; height: 266px;" src="http://3.bp.blogspot.com/-0BfnejP-UEE/TbxftjkCQsI/AAAAAAAABWI/eOcIeBdxdtU/s320/torustd.jpg" alt="" id="BLOGGER_PHOTO_ID_5601457272787190466" border="0" />
<img style="display: block; margin: 0px auto 10px; text-align: center; cursor: pointer; width: 311px; height: 320px;" src="http://4.bp.blogspot.com/-R1iTUBrYO3Q/TbxfbAiVvyI/AAAAAAAABWA/BTBqMf8H5eA/s320/torus.jpg" alt="" id="BLOGGER_PHOTO_ID_5601456954147192610" border="0" /></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;torus.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                  <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">y</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">z</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">r</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">q</span> <span class="mi">5</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">p</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">phi</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">phi-env</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">1000</span> <span class="mf">6.283</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">1000</span> <span class="nb">do</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">setf</span> <span class="nv">phi</span> <span class="p">(</span><span class="nv">envelope-interp</span> <span class="nv">i</span> <span class="nv">phi-env</span><span class="p">)</span>
</span><span class='line'>    <span class="nv">r</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">cos</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">q</span> <span class="nv">phi</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'>    <span class="nv">x</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">r</span> <span class="p">(</span><span class="nb">cos</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">p</span> <span class="nv">phi</span><span class="p">)))</span>
</span><span class='line'>    <span class="nv">y</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">r</span> <span class="p">(</span><span class="nb">sin</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">p</span> <span class="nv">phi</span><span class="p">)))</span>
</span><span class='line'>    <span class="nv">z</span> <span class="p">(</span><span class="nb">sin</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">q</span> <span class="nv">phi</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D ~D~%&quot;</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>The Van Der-Pol Oscillator</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="nb">with-open-file</span> <span class="p">(</span><span class="vg">*standard-output*</span> <span class="s">&quot;vdp.txt&quot;</span> <span class="ss">:direction</span> <span class="ss">:output</span>
</span><span class='line'>                                  <span class="ss">:if-exists</span> <span class="ss">:supersede</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x1</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">y1</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">x</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">y</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">u</span> <span class="mf">6.0</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nv">dt</span> <span class="mf">0.1</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>   <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">below</span> <span class="mi">10000</span> <span class="nb">do</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">setf</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">u</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x1</span> <span class="nv">x1</span><span class="p">))))</span> <span class="nv">y1</span><span class="p">))</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">y</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">y1</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="mi">1</span> <span class="nv">u</span><span class="p">)</span> <span class="nv">x1</span><span class="p">)</span> <span class="nv">dt</span><span class="p">))</span>
</span><span class='line'>     <span class="nv">x1</span> <span class="nv">x</span>
</span><span class='line'>     <span class="nv">y1</span> <span class="nv">y</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'> <span class="p">(</span><span class="nb">format</span> <span class="no">t</span> <span class="s">&quot;~D ~D~%&quot;</span> <span class="nv">y</span> <span class="nv">x</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Computer Programming for Music Technology - Quadraphonic Delay In C and Max/Msp]]></title>
    <link href="http://jordanrs.github.io/blog/2010/12/19/Computer-Programming-for-Music-Technology---Quadraphonic-Delay-In-C-and-MaxMsp/"/>
    <updated>2010-12-19T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2010/12/19/Computer-Programming-for-Music-Technology&#8212;Quadraphonic-Delay-In-C-and-MaxMsp</id>
    <content type="html"><![CDATA[<p>The final piece of a course in C and its uses in building Max/Msp objects was to design and code a quadraphonic (four tap) delay in C for use as a Max/Msp object. The delay takes an incoming mono signal and allows the user to set four delay times which correspond to the the four outputs.</p>

<p><strong>Source code and Object</strong>
<a href="https://sites.google.com/site/jordanrsblog/cpmt/quaddelaysrc.zip">
Download</a></p>

<p>Built using Max/Msp SDK 5.1.6, tested on Windows 7 with Max/Msp 5.0.7</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Real Time Systems Piece 2 - PS3 Dualshock 3 as a Performance Controller]]></title>
    <link href="http://jordanrs.github.io/blog/2010/12/18/Real-Time-Systems-Piece-2---PS3-Dualshock-3-as-a-Performance-Controller/"/>
    <updated>2010-12-18T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2010/12/18/Real-Time-Systems-Piece-2&#8212;PS3-Dualshock-3-as-a-Performance-Controller</id>
    <content type="html"><![CDATA[<p>Building on Submission 1 this performance piece use the PS3 Dualshock 3 controller as its interface. It takes full advantage of the built in tilt sensors as well as pressure triggers, analogue sticks D-pad and buttons. Functionality is best achieved through the <a href="http://www.motioninjoy.com/download">Motion In Joy driver</a> and getting the data through Max&rsquo;s <a href="http://cycling74.com/docs/max5/refpages/max-ref/hi.html">hi</a> object</p>

<p><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 349px;" src="http://2.bp.blogspot.com/-2QQ78lprmF8/TbxmDp8h58I/AAAAAAAABWg/FzAVj6ei9GY/s400/ps3pres.jpg" border="0" alt=""id="BLOGGER_PHOTO_ID_5601464249527429058" />
<img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 302px;" src="http://1.bp.blogspot.com/-oPwJwKwr0PY/TbxmhIpmoeI/AAAAAAAABWo/pdf64l1zxhU/s400/ps3dev.jpg" border="0" alt=""id="BLOGGER_PHOTO_ID_5601464755985752546" /></p>

<p><strong>The Final Performance</strong></p>

<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F102118173&amp;color=ff6600&amp;auto_play=false&amp;show_artwork=false"></iframe>


<p><strong>Raw Max Files and Report</strong>
<a href="https://sites.google.com/site/jordanrsblog/realtimesystems/piece2/PS3_Performance_patch.zip">
Download</a></p>

<p>Built using Max 5.0.7 and MotioninJoy 6</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Algorithmic Composition with Common Lisp Music - Piece-1]]></title>
    <link href="http://jordanrs.github.io/blog/2010/11/15/Algorithmic-Composition-with-Common-Lisp-Music---Piece-1/"/>
    <updated>2010-11-15T00:00:00+00:00</updated>
    <id>http://jordanrs.github.io/blog/2010/11/15/Algorithmic-Composition-with-Common-Lisp-Music&#8212;Piece-1</id>
    <content type="html"><![CDATA[<p>This composition was used as an inital exploration into the world of Lisp and Common Lisp Music 4 (CLM). It experiemtned with using the builtin instruments as well as instruments provided by the course lecturer. It takes loose inspiration from a piece by John Chowning with more explanation in the report. All samples used are referenced from within the source file and can be downloaded from <a href="" title="http://www.freesound.org/">www.freesound.org</a></p>

<p><strong>Final Composition</strong></p>

<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F102118377&amp;color=ff6600&amp;auto_play=false&amp;show_artwork=false"></iframe>


<p><a href="" title="https://sites.google.com/site/jordanrsblog/clmpiece1.zip">Download Source and Report</a></p>
]]></content>
  </entry>
  
</feed>
